"use strict";function add_plot(t,e,a){plots_data.value.some(i=>i.station_id==t&&i.para==e&&i.period==a)||plots_data.value.push({station_id:t,para:e,period:a,key:`${t}_${e}_${a}`})}const para_dict={pr:gettext("precipitation"),tas:gettext("air temperature"),td:gettext("moisted temperature"),rsds:gettext("global radiation (W/mÂ²)"),rh:gettext("relative air moisture"),ET:gettext("evapotranspiration"),snow:gettext("snowfall")},period_dict={a:gettext("Year"),m:gettext("Daily Maximum"),w:gettext("Winter"),f:gettext("Spring"),s:gettext("Summer"),h:gettext("Fall")};var position,plots_data=Vue.ref([]),plotAreaApp=Vue.createApp({data:()=>({plots_data:plots_data}),methods:{clear_plot_area(){this.plots_data.splice(0,this.plots_data.length)}},updated(){tooltipList=tooltipList.filter(t=>t._element.isConnected),[...document.querySelectorAll('div#plot_area [data-bs-toggle="tooltip"]')].map(t=>tooltipList.push(new bootstrap.Tooltip(t)))}});plotAreaApp.component("plot-card",{data:()=>({top:0,left:0,width:"300px"}),props:["station_id","para","period","n"],computed:{src:function(){return`/static/RheiKlim/PNG/A4_Ann_Trends_${this.station_id}_${this.para}_${this.period}.png`},style:function(){let t=15*this.n_start;return{left:t+5+"px",top:t+60+"px"}}},template:'<div class="card plot_card" :style="style"><div class="card-body"><button type="button" class="btn-close" aria-label="Close" @click="remove_plot"></button><img class="plot_img" v-bind:src="src"></div></div>',methods:{remove_plot(){plots_data.value.splice(this.n,1)}},created(){this.n_start=this.n}}),plotAreaApp.mount("#plot_area"),interact(".plot_card").resizable({edges:{top:!0,left:!0,bottom:!0,right:!0},listeners:{move:function(t){let{x:e,y:a}=t.target.dataset;e=(parseFloat(e)||0)+t.deltaRect.left,a=(parseFloat(a)||0)+t.deltaRect.top,Object.assign(t.target.style,{width:`${t.rect.width}px`,height:`${t.rect.height}px`,transform:`translate(${e}px, ${a}px)`}),Object.assign(t.target.dataset,{x:e,y:a})}},modifiers:[interact.modifiers.aspectRatio({ratio:"preserve",modifiers:[interact.modifiers.restrictSize({max:"parent",min:{width:40}})]})]}),interact(".plot_card").draggable({listeners:{start(t){position=""==t.target.style.transform?{x:0,y:0}:{x:parseFloat(t.target.dataset.x),y:parseFloat(t.target.dataset.y)}},move(t){position.x+=t.dx,position.y+=t.dy,t.target.style.transform=`translate(${position.x}px, ${position.y}px)`,Object.assign(t.target.dataset,position)}},modifiers:[interact.modifiers.restrictRect({restriction:"div#plot_area>div.card"})]});let plot_area_inter=interact("#plot_area>.card").resizable({edges:{bottom:!0,right:!0},listeners:{move:function(t){Object.assign(t.target.style,{width:`${t.rect.width}px`,height:`${t.rect.height}px`})}},modifiers:[interact.modifiers.restrictSize({min:()=>{let t=0,e=0;document.querySelectorAll(".plot_card").forEach(a=>{t=Math.max(t,a.getBoundingClientRect().right),e=Math.max(e,a.getBoundingClientRect().bottom)});let a=document.querySelector("#plot_area").getBoundingClientRect();return{width:t-a.x+10,height:e-a.y+10}},max:()=>{let t=document.getElementById("main_page").getBoundingClientRect(),e=document.querySelector("#plot_area").getBoundingClientRect();return{width:t.right-e.left-5,height:1e4}}})]});