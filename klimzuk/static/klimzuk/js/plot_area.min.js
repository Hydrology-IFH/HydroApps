"use strict";const para_dict={pr:"Niederschlag",tas:"Lufttemperatur",td:"Feuchtetemperatur",rsds:"Globalstrahlung (W/mÂ²)",rh:"relative Luftfeuchtigkeit",ET:"evapotranspiration",snow:"Schnee"},period_dict={a:"Year",m:"Daily Maximum",w:"Winter",f:"Spring",s:"Summer",h:"Fall"};var plots_data=Vue.ref([]);function add_plot(stid,para,period){plots_data.value.some(el=>el.station_id==stid&&el.para==para&&el.period==period)||plots_data.value.push({station_id:stid,para:para,period:period,key:`${stid}_${para}_${period}`})}var plotAreaApp=Vue.createApp({data:()=>({plots_data:plots_data}),methods:{clear_plot_area(){this.plots_data.splice(0,this.plots_data.length)}}}),position;plotAreaApp.component("plot-card",{data:()=>({top:0,left:0,width:"300px"}),props:["station_id","para","period","n"],computed:{src:function(){return`/static/klimzuk/PNG/A4_Ann_Trends_${this.station_id}_${this.para}_${this.period}.png`},style:function(){let jitter=15*this.n_start;return{left:jitter+5+"px",top:jitter+60+"px"}}},template:'<div class="card plot_card" :style="style"><div class="card-body"><button type="button" class="btn-close" aria-label="Close" @click="remove_plot"></button><img class="plot_img" v-bind:src="src"></div></div>',methods:{remove_plot(){plots_data.value.splice(this.n,1)}},created(){this.n_start=this.n}}),plotAreaApp.mount("#plot_area"),interact(".plot_card").resizable({edges:{top:!0,left:!0,bottom:!0,right:!0},listeners:{move:function(event){let{x:x,y:y}=event.target.dataset;x=(parseFloat(x)||0)+event.deltaRect.left,y=(parseFloat(y)||0)+event.deltaRect.top,Object.assign(event.target.style,{width:`${event.rect.width}px`,height:`${event.rect.height}px`,transform:`translate(${x}px, ${y}px)`}),Object.assign(event.target.dataset,{x:x,y:y})}},modifiers:[interact.modifiers.aspectRatio({ratio:"preserve",modifiers:[interact.modifiers.restrictSize({max:"parent",min:{width:40}})]})]}),interact(".plot_card").draggable({listeners:{start(event){position=""==event.target.style.transform?{x:0,y:0}:{x:parseFloat(event.target.dataset.x),y:parseFloat(event.target.dataset.y)}},move(event){position.x+=event.dx,position.y+=event.dy,event.target.style.transform=`translate(${position.x}px, ${position.y}px)`,Object.assign(event.target.dataset,position)}},modifiers:[interact.modifiers.restrictRect({restriction:"div#plot_area>div.card"})]});let plot_area_inter=interact("#plot_area>.card").resizable({edges:{bottom:!0,right:!0},listeners:{move:function(event){Object.assign(event.target.style,{width:`${event.rect.width}px`,height:`${event.rect.height}px`})}},modifiers:[interact.modifiers.restrictSize({min:()=>{let max_x=0,max_y=0;document.querySelectorAll(".plot_card").forEach(e=>{max_x=Math.max(max_x,e.getBoundingClientRect().right),max_y=Math.max(max_y,e.getBoundingClientRect().bottom)});let start=document.querySelector("#plot_area").getBoundingClientRect();return{width:max_x-start.x+10,height:max_y-start.y+10}},max:()=>{let main_page_bb=document.getElementById("main_page").getBoundingClientRect(),start_bb=document.querySelector("#plot_area").getBoundingClientRect();return{width:main_page_bb.right-start_bb.left-5,height:1e4}}})]});